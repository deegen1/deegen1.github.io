<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>SICO - Libraries</title>
	<link rel="stylesheet" href="../style/style.css" type="text/css">
	<script src="../style/style.js"></script>
</head>
<body>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Header ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<div id="header"><a href="../index.html">Alec Dee's General Site</a></div>
<div id="content">


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~ SICO Libraries ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>SICO Libraries</h1>
<p>These are the libraries I've worked on to build
<a href="./index.html">SICO</a> up from one instruction into an easy to use
architecture.</p>
<p>They can all be downloaded in <a href="./sico.zip">sico.zip</a>.</p>
<table class="datatable headerrow">
<tr><td>File</td><td>Demo</td><td>Description</td></tr>
<tr><td>master.sico</td><td></td><td>All libraries in one file.</td></tr>
<tr><td>string.sico</td><td>
<a href="./index.html?demo=String%20Printing">demo</a></td>
<td>String operations, printing, formating.</td></tr>
<tr><td>uint.sico</td><td>
<a href="./index.html?demo=Unsigned%20Math">demo</a></td>
<td>Unsigned integer arithmetic and bitwise operations.</td></tr>
<tr><td>int.sico</td><td></td><td>Signed comparisons, mul, and div.</td></tr>
<tr><td>random.sico</td><td>
<a href="./index.html?demo=Random%20Numbers">demo</a></td>
<td>Pseudo-random number generator.</td></tr>
<tr><td>memory.sico</td><td><a href="./index.html?demo=Memory">demo</a></td>
<td>Memory allocation, copying, etc.</td></tr>
<tr><td>graphics.sico</td><td><a href="./index.html?demo=Graphics">demo</a></td>
<td>Image drawing. Still in testing.</td></tr>
</table>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Strings ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>Strings</h1>
<p>Try the live demo <a href="./index.html?demo=String%20Printing">here</a>.
</p>
<p>string.sico is fundamental to working on other libraries. It defines the
<i>print</i> function which allows us to print ASCII strings as well as
numerical values. This is needed to print diagnostic messages and see what other
libraries are actually doing. It can be called like this:</p>
<div class="codeblock langsico">0 ? string.print 'x ' '= '  string.uint x 10 0
</div>
<p>The example can be broken up into a few parts:</p>
<table class="datatable">
<tr><td><i>0 ? string.print</i></td><td>the SICO instruction that jumps to the
<i>string.print</i> function and gives it our calling address.</td></tr>
<tr><td><i>'x '  '= '      </i></td><td>the ASCII literal values for "x = ". We
could also use <i>120 32 61 32</i></td></tr>
<tr><td><i>string.uint     </i></td><td>a special value that tells
<i>string.print</i> that the next value is an unsigned integer.</td></tr>
<tr><td><i>x               </i></td><td>the unsigned integer to output.
</td></tr>
<tr><td><i>10              </i></td><td>the ASCII value for an end-of-line.
</td></tr>
<tr><td><i>0               </i></td><td>the end of the string.</td></tr>
</table>
<p>So if <i>[x]</i> is <i>20</i>, then this will get output to the console:</p>
<div class="consoleblock">x = 20</div>
<p><a href="./demos/demo_string.sico">demo_string.sico</a> shows how to use
the library. It's also used in the live version linked above.</p>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Unsigned Math ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>Unsigned Math</h1>
<p>Try the live demo <a href="./index.html?demo=Unsigned%20Math">here</a>.</p>
<p>uint.sico defines all of the usual functions for handling unsigned integer
arithmetic and bitwise operations. For example, to compute the bitwise AND of
<i>[B]</i> and <i>[C]</i> and store it <i>[A]</i>, we would call</p>
<div class="codeblock langsico">0 ? uint.and A B C</div>
<p>All of the functions are fairly well optimized. The table below gives the
worst case number of instructions required per function call.</p>
<table class="datatable insttable headerrow">
<tr><td>Function</td><td>Time (64 bits)</td></tr>
<tr><td>write</td><td>2303</td></tr>
<tr><td>read</td><td>1456</td></tr>
<tr><td>cmp</td><td>29</td></tr>
<tr><td>min</td><td>34</td></tr>
<tr><td>max</td><td>34</td></tr>
<tr><td>set</td><td>24</td></tr>
<tr><td>neg</td><td>25</td></tr>
<tr><td>add</td><td>30</td></tr>
<tr><td>sub</td><td>31</td></tr>
<tr><td>mul</td><td>885</td></tr>
<tr><td>div</td><td>613</td></tr>
<tr><td>gcd</td><td>1330</td></tr>
<tr><td>shl</td><td>168</td></tr>
<tr><td>shr</td><td>543</td></tr>
<tr><td>not</td><td>26</td></tr>
<tr><td>and</td><td>485</td></tr>
<tr><td>or</td><td>486</td></tr>
<tr><td>xor</td><td>487</td></tr>
</table>
<p><a href="./demos/demo_uint.sico">demo_uint.sico</a> shows how to use the
library. It's also used in the live version linked above.</p>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Signed Math ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>Signed Math</h1>
<p>int.sico covers all of the signed integer functions that uint.sico doesn't
cover. The table below gives the worst case number of instructions required per
function call.</p>
<table class="datatable insttable headerrow">
<tr><td>Function</td><td>Time (64 bits)</td></tr>
<tr><td>write</td><td>2317</td></tr>
<tr><td>read</td><td>1472</td></tr>
<tr><td>cmp</td><td>37</td></tr>
<tr><td>min</td><td>43</td></tr>
<tr><td>max</td><td>43</td></tr>
<tr><td>abs</td><td>30</td></tr>
<tr><td>mul</td><td>893</td></tr>
<tr><td>div</td><td>640</td></tr>
<tr><td>shr</td><td>555</td></tr>
</table>


<!--~~~~~~~~~~~~~~~~~~~~~~~ Random Number Generation ~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>Random Number Generation</h1>
<p>Try the live demo <a href="./index.html?demo=Random%20Numbers">here</a>.</p>
<p>random.sico defines a PRNG with a period of 2^64. It provides five functions
for handling random numbers:</p>
<div class="codeblock langsico">random.hash    ret num
random.seed    num
random.jump    num
random.get     dst
random.mod     dst mod
random.shuffle arr len</div>
<p>For instance, to get a random number modulo 52 and store it in <i>rand</i>,
call:</p>
<div class="codeblock langsico">0 ? random.get rand mod
rand: 0
mod:  52</div>
<p><a href="./demos/demo_random.sico">demo_random.sico</a> shows how to use the
library. It's also used in the live version linked above.</p>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Memory ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<h1>Memory</h1>
<p>Try the live demo <a href="./index.html?demo=Memory">here</a>.</p>
<p>memory.sico defines functions for managing and allocating memory. In order to
allocate memory safely, the library needs to be last when concatenating with
other libraries.</p>
<div class="codeblock langsico">mem.getargs dst0 refs0 dst1 refs1 ... 0

mem.get     val mem
mem.getidx  val mem idx
mem.set     mem val
mem.setidx  mem idx val

mem.zero    dst len
mem.copy    dst src len
mem.sort    arr len cmp

mem.alloc   mem len
mem.realloc ret mem len
mem.free    mem
mem.alloc.verifyfree</div>
<p>For instance, to allocate a block of memory with <i>30</i> cells and set
<i>arr[2]=400</i>:</p>
<div class="codeblock langsico">0 ? mem.alloc arr len
0 ? mem.set   arr idx val
0 ? mem.free  arr

arr: 0
len: 30
idx: 2
val: 400</div>
<p><a href="./demos/demo_memory.sico">demo_memory.sico</a> shows how to use the
library. It's also used in the live version linked above.</p>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Footer ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
</div><div id="footer">Created on 18 Dec 2020 - Modified on 16 Oct 2023<br>
Questions and comments: akdee<b>OBFUS</b>144@g<b>CATE</b>mail.com<br>
<a href="../index.html">Alec Dee's General Site</a></div>
</body>
</html>
